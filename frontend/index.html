<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Intelligent Storage - AI-Powered File Management</title>
    <link rel="stylesheet" href="styles.css">
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet">
</head>
<body>
    <!-- Navigation -->
    <nav class="navbar">
        <div class="container">
            <div class="nav-content">
                <div class="logo">
                    <svg width="32" height="32" viewBox="0 0 32 32" fill="none">
                        <rect width="32" height="32" rx="8" fill="url(#gradient)"/>
                        <path d="M16 8L24 12V20L16 24L8 20V12L16 8Z" stroke="white" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                        <defs>
                            <linearGradient id="gradient" x1="0" y1="0" x2="32" y2="32">
                                <stop offset="0%" stop-color="#6366f1"/>
                                <stop offset="100%" stop-color="#8b5cf6"/>
                            </linearGradient>
                        </defs>
                    </svg>
                    <span class="logo-text">Intelligent Storage</span>
                </div>
                <div class="nav-links">
                    <a href="http://localhost:8000/files/browse/" class="nav-link">File Browser</a>
                    <a href="#upload" class="nav-link">Upload</a>
                    <a href="#search" class="nav-link">Search</a>
                    <a href="#json" class="nav-link">JSON Data</a>
                    <a href="#analytics" class="nav-link">Analytics</a>
                </div>
                <button class="btn-primary" id="healthCheckBtn">
                    <span class="status-dot"></span>
                    System Status
                </button>
            </div>
        </div>
    </nav>

    <!-- Hero Section -->
    <section class="hero">
        <div class="container">
            <div class="hero-content">
                <h1 class="hero-title">
                    AI-Powered File Management
                    <span class="gradient-text">Made Simple</span>
                </h1>
                <p class="hero-description">
                    Intelligent storage system that automatically categorizes your files,
                    extracts insights, and makes everything searchable with AI.
                </p>
                <div class="hero-actions">
                    <button class="btn-large btn-primary" onclick="window.location.href='http://localhost:8000/files/browse/'">
                        Browse Files
                        <svg width="20" height="20" viewBox="0 0 20 20" fill="none">
                            <path d="M7.5 15L12.5 10L7.5 5" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                        </svg>
                    </button>
                    <button class="btn-large btn-secondary" onclick="scrollToSection('upload')">
                        Upload Files
                    </button>
                </div>
                <div class="hero-stats">
                    <div class="stat-item">
                        <div class="stat-value" id="totalFiles">0</div>
                        <div class="stat-label">Files Stored</div>
                    </div>
                    <div class="stat-item">
                        <div class="stat-value" id="totalChunks">0</div>
                        <div class="stat-label">Indexed Chunks</div>
                    </div>
                    <div class="stat-item">
                        <div class="stat-value" id="indexedFiles">0</div>
                        <div class="stat-label">Searchable Files</div>
                    </div>
                </div>
            </div>
        </div>
    </section>

    <!-- Main Content -->
    <main class="main-content">
        <div class="container">

            <!-- Upload Section -->
            <section id="upload" class="section">
                <div class="section-header">
                    <h2 class="section-title">Upload Files</h2>
                    <p class="section-description">
                        Upload any file type. Our AI will automatically categorize and organize it.
                    </p>
                </div>

                <div class="grid-2">
                    <!-- Single File Upload -->
                    <div class="card">
                        <div class="card-header">
                            <h3 class="card-title">Single File</h3>
                            <span class="badge">Recommended</span>
                        </div>
                        <div class="upload-area" id="singleUploadArea">
                            <input type="file" id="singleFileInput" hidden>
                            <div class="upload-icon">
                                <svg width="48" height="48" viewBox="0 0 48 48" fill="none">
                                    <path d="M24 32V16M24 16L16 24M24 16L32 24" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                                    <path d="M8 32V36C8 38.2091 9.79086 40 12 40H36C38.2091 40 40 38.2091 40 36V32" stroke="currentColor" stroke-width="2" stroke-linecap="round"/>
                                </svg>
                            </div>
                            <p class="upload-text">Drop file here or click to browse</p>
                            <p class="upload-subtext">Supports all file types</p>
                        </div>
                        <div class="form-group">
                            <label class="form-label">Optional Comment</label>
                            <input type="text" id="singleComment" class="form-input" placeholder="Add context to improve categorization">
                        </div>
                        <button class="btn-primary btn-full" id="singleUploadBtn">
                            Upload File
                        </button>
                    </div>

                    <!-- Batch Upload -->
                    <div class="card">
                        <div class="card-header">
                            <h3 class="card-title">Batch Upload</h3>
                            <span class="badge badge-secondary">Multiple Files</span>
                        </div>
                        <div class="upload-area" id="batchUploadArea">
                            <input type="file" id="batchFileInput" multiple hidden>
                            <div class="upload-icon">
                                <svg width="48" height="48" viewBox="0 0 48 48" fill="none">
                                    <path d="M16 12H12C9.79086 12 8 13.7909 8 16V36C8 38.2091 9.79086 40 12 40H32C34.2091 40 36 38.2091 36 36V32" stroke="currentColor" stroke-width="2" stroke-linecap="round"/>
                                    <path d="M24 8H36C38.2091 8 40 9.79086 40 12V24" stroke="currentColor" stroke-width="2" stroke-linecap="round"/>
                                    <path d="M24 24V8M24 8L18 14M24 8L30 14" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                                </svg>
                            </div>
                            <p class="upload-text">Drop multiple files here</p>
                            <p class="upload-subtext">Or click to select files</p>
                        </div>
                        <div class="form-group">
                            <label class="form-label">Optional Comment (for all files)</label>
                            <input type="text" id="batchComment" class="form-input" placeholder="Add context for all files">
                        </div>
                        <button class="btn-primary btn-full" id="batchUploadBtn">
                            Upload Files
                        </button>
                    </div>
                </div>

                <!-- Upload Results -->
                <div id="uploadResults" class="results-container" style="display: none;">
                    <div class="results-header">
                        <h3 class="results-title">Upload Results</h3>
                        <button class="btn-text" onclick="closeResults('uploadResults')">Close</button>
                    </div>
                    <div id="uploadResultsContent"></div>
                </div>
            </section>

            <!-- Semantic Search Section -->
            <section id="search" class="section">
                <div class="section-header">
                    <h2 class="section-title">Semantic Search</h2>
                    <p class="section-description">
                        Search your files by meaning, not just keywords. Powered by AI embeddings.
                    </p>
                </div>

                <div class="card">
                    <div class="search-container">
                        <div class="search-input-group">
                            <svg class="search-icon" width="20" height="20" viewBox="0 0 20 20" fill="none">
                                <path d="M9 17C13.4183 17 17 13.4183 17 9C17 4.58172 13.4183 1 9 1C4.58172 1 1 4.58172 1 9C1 13.4183 4.58172 17 9 17Z" stroke="currentColor" stroke-width="2"/>
                                <path d="M19 19L14.65 14.65" stroke="currentColor" stroke-width="2" stroke-linecap="round"/>
                            </svg>
                            <input type="text" id="searchQuery" class="search-input" placeholder="Ask anything about your files...">
                        </div>
                        <div class="search-filters">
                            <select id="searchFileType" class="filter-select">
                                <option value="">All Types</option>
                                <option value="documents">Documents</option>
                                <option value="images">Images</option>
                                <option value="videos">Videos</option>
                                <option value="others">Others</option>
                            </select>
                            <input type="number" id="searchLimit" class="filter-input" value="10" min="1" max="50">
                        </div>
                        <button class="btn-primary btn-large" id="semanticSearchBtn">
                            Search
                        </button>
                    </div>

                    <!-- Search Results -->
                    <div id="searchResults" class="search-results" style="display: none;">
                        <div class="results-header">
                            <h3 class="results-title">Search Results</h3>
                            <span id="searchCount" class="results-count"></span>
                        </div>
                        <div id="searchResultsContent" class="search-results-list"></div>
                    </div>

                    <!-- RAG Query -->
                    <div class="rag-query-section">
                        <div class="divider">
                            <span class="divider-text">Or ask a question</span>
                        </div>
                        <div class="form-group">
                            <label class="form-label">Ask AI about your documents</label>
                            <textarea id="ragQuestion" class="form-textarea" rows="3" placeholder="What are the main topics covered in my documents?"></textarea>
                        </div>
                        <button class="btn-secondary btn-full" id="ragQueryBtn">
                            Get AI Answer
                        </button>
                    </div>

                    <!-- RAG Answer -->
                    <div id="ragAnswer" class="rag-answer" style="display: none;">
                        <div class="answer-header">
                            <h3 class="answer-title">AI Answer</h3>
                        </div>
                        <div id="ragAnswerContent" class="answer-content"></div>
                        <div id="ragSources" class="answer-sources"></div>
                    </div>
                </div>
            </section>

            <!-- JSON Data Section -->
            <section id="json" class="section">
                <div class="section-header">
                    <h2 class="section-title">JSON Data Storage</h2>
                    <p class="section-description">
                        Upload JSON data and let AI decide between SQL and NoSQL storage.
                    </p>
                </div>

                <div class="card">
                    <div class="form-group">
                        <label class="form-label">Dataset Name</label>
                        <input type="text" id="jsonName" class="form-input" placeholder="my_dataset">
                    </div>
                    <div class="form-group">
                        <label class="form-label">JSON Data</label>
                        <textarea id="jsonData" class="form-textarea code-textarea" rows="10" placeholder='{"key": "value"}' spellcheck="false"></textarea>
                    </div>
                    <div class="form-group">
                        <label class="form-label">Optional Comment</label>
                        <input type="text" id="jsonComment" class="form-input" placeholder="Add context for better schema generation">
                    </div>
                    <button class="btn-primary btn-full" id="jsonUploadBtn">
                        Analyze & Store
                    </button>
                </div>

                <!-- JSON Results -->
                <div id="jsonResults" class="results-container" style="display: none;">
                    <div class="results-header">
                        <h3 class="results-title">Analysis Results</h3>
                        <button class="btn-text" onclick="closeResults('jsonResults')">Close</button>
                    </div>
                    <div id="jsonResultsContent"></div>
                </div>
            </section>

            <!-- File Browser Section -->
            <section id="browser" class="section">
                <div class="section-header">
                    <h2 class="section-title">üìÅ My JSON Documents</h2>
                    <p class="section-description">
                        Browse, view, and retrieve your stored JSON documents with range selection.
                    </p>
                </div>

                <div class="card">
                    <button class="btn-primary btn-full" id="loadDocumentsBtn">
                        Load My Documents
                    </button>
                </div>

                <!-- Documents List -->
                <div id="documentsList" style="display: none;">
                    <div class="card">
                        <h3 class="mb-2">Your Documents</h3>
                        <div id="documentsGrid" class="documents-grid"></div>
                    </div>
                </div>

                <!-- Document Viewer with Range Selection -->
                <div id="documentViewer" class="results-container" style="display: none;">
                    <div class="results-header">
                        <h3 class="results-title">Document: <span id="viewerDocId"></span></h3>
                        <button class="btn-text" onclick="closeDocumentViewer()">Close</button>
                    </div>

                    <div class="card">
                        <h4 class="mb-1">üìä Range Selection</h4>
                        <p class="mb-2" style="color: var(--text-secondary);">
                            Select a range of data to retrieve (for array data)
                        </p>

                        <div class="grid-3">
                            <div class="form-group">
                                <label class="form-label">Start Index (Offset)</label>
                                <input type="number" id="rangeOffset" class="form-input" value="0" min="0">
                            </div>
                            <div class="form-group">
                                <label class="form-label">Number of Items (Limit)</label>
                                <input type="number" id="rangeLimit" class="form-input" value="10" min="1">
                            </div>
                            <div class="form-group" style="display: flex; align-items: flex-end;">
                                <button class="btn-primary btn-full" onclick="fetchDocumentRange()">
                                    Retrieve Range
                                </button>
                            </div>
                        </div>
                    </div>

                    <div id="viewerContent" class="card mt-2">
                        <div class="loading-placeholder">Select a range and click "Retrieve Range"</div>
                    </div>
                </div>
            </section>

            <!-- Analytics Section -->
            <section id="analytics" class="section">
                <div class="section-header">
                    <h2 class="section-title">System Analytics</h2>
                    <p class="section-description">
                        Real-time insights into your intelligent storage system.
                    </p>
                </div>

                <div class="grid-3">
                    <div class="stat-card">
                        <div class="stat-card-icon">
                            <svg width="24" height="24" viewBox="0 0 24 24" fill="none">
                                <path d="M9 12H15M9 16H15M17 21H7C5.89543 21 5 20.1046 5 19V5C5 3.89543 5.89543 3 7 3H12.5858C12.851 3 13.1054 3.10536 13.2929 3.29289L18.7071 8.70711C18.8946 8.89464 19 9.149 19 9.41421V19C19 20.1046 18.1046 21 17 21Z" stroke="currentColor" stroke-width="2" stroke-linecap="round"/>
                            </svg>
                        </div>
                        <div class="stat-card-content">
                            <div class="stat-card-value" id="analyticsFiles">-</div>
                            <div class="stat-card-label">Total Files</div>
                        </div>
                    </div>

                    <div class="stat-card">
                        <div class="stat-card-icon">
                            <svg width="24" height="24" viewBox="0 0 24 24" fill="none">
                                <path d="M4 7C4 5.89543 4.89543 5 6 5H8C9.10457 5 10 5.89543 10 7V9C10 10.1046 9.10457 11 8 11H6C4.89543 11 4 10.1046 4 9V7Z" stroke="currentColor" stroke-width="2"/>
                                <path d="M14 7C14 5.89543 14.8954 5 16 5H18C19.1046 5 20 5.89543 20 7V9C20 10.1046 19.1046 11 18 11H16C14.8954 11 14 10.1046 14 9V7Z" stroke="currentColor" stroke-width="2"/>
                                <path d="M4 17C4 15.8954 4.89543 15 6 15H8C9.10457 15 10 15.8954 10 17V19C10 20.1046 9.10457 21 8 21H6C4.89543 21 4 20.1046 4 19V17Z" stroke="currentColor" stroke-width="2"/>
                                <path d="M14 17C14 15.8954 14.8954 15 16 15H18C19.1046 15 20 15.8954 20 17V19C20 20.1046 19.1046 21 18 21H16C14.8954 21 14 20.1046 14 19V17Z" stroke="currentColor" stroke-width="2"/>
                            </svg>
                        </div>
                        <div class="stat-card-content">
                            <div class="stat-card-value" id="analyticsChunks">-</div>
                            <div class="stat-card-label">Indexed Chunks</div>
                        </div>
                    </div>

                    <div class="stat-card">
                        <div class="stat-card-icon">
                            <svg width="24" height="24" viewBox="0 0 24 24" fill="none">
                                <path d="M4 6H20M4 12H20M4 18H20" stroke="currentColor" stroke-width="2" stroke-linecap="round"/>
                            </svg>
                        </div>
                        <div class="stat-card-content">
                            <div class="stat-card-value" id="analyticsIndexed">-</div>
                            <div class="stat-card-label">Searchable Files</div>
                        </div>
                    </div>
                </div>

                <button class="btn-secondary btn-full" id="refreshStatsBtn">
                    Refresh Statistics
                </button>
            </section>

        </div>
    </main>

    <!-- Footer -->
    <footer class="footer">
        <div class="container">
            <div class="footer-content">
                <p class="footer-text">
                    Intelligent Storage System - Powered by AI
                </p>
                <div class="footer-links">
                    <a href="#" class="footer-link">Documentation</a>
                    <a href="#" class="footer-link">API</a>
                    <a href="#" class="footer-link">GitHub</a>
                </div>
            </div>
        </div>
    </footer>

    <!-- Loading Overlay -->
    <div id="loadingOverlay" class="loading-overlay" style="display: none;">
        <div class="loading-spinner"></div>
        <p class="loading-text">Processing...</p>
    </div>

    <!-- Toast Notifications -->
    <div id="toastContainer" class="toast-container"></div>

    <script src="app.js"></script>
</body>
</html>
